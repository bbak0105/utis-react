@use 'sass:map';
@use './tokens' as *;

// min-width media query (mobile-first)
@mixin mq($from) {
  $bp: map.get($breakpoints, $from);
  @if $bp == null { @error "Unknown breakpoint: #{$from}"; }
  @media (min-width: #{$bp}px) { @content; }
}

// fluid font-size (px â†’ clamp)
@function fluid($min, $max) {
  @return clamp(#{$min}px,
    calc(#{$min}px + (#{$max - $min}) * ((100vw - #{$min-vw}px) / (#{$max-vw - $min-vw}))),
    #{$max}px);
}

// spacing getter
@function s($k) {
  @return map.get($space, $k);
}

// Typography mixins
@mixin font($size: base, $weight: normal, $line-height: normal) {
  font-family: $font-family;
  font-size: map.get((
    xs: $font-size-xs,
    sm: $font-size-sm,
    base: $font-size-base,
    lg: $font-size-lg,
    xl: $font-size-xl,
    '2xl': $font-size-2xl,
    '3xl': $font-size-3xl,
    '4xl': $font-size-4xl,
    '5xl': $font-size-5xl
  ), $size);
  font-weight: map.get((
    thin: $font-weight-thin,
    extralight: $font-weight-extralight,
    light: $font-weight-light,
    normal: $font-weight-normal,
    medium: $font-weight-medium,
    semibold: $font-weight-semibold,
    bold: $font-weight-bold,
    extrabold: $font-weight-extrabold,
    black: $font-weight-black
  ), $weight);
  line-height: map.get((
    tight: $line-height-tight,
    snug: $line-height-snug,
    normal: $line-height-normal,
    relaxed: $line-height-relaxed,
    loose: $line-height-loose
  ), $line-height);
}

// Quick font mixins for common use cases
@mixin font-thin($size: base) {
  @include font($size, thin);
}

@mixin font-light($size: base) {
  @include font($size, light);
}

@mixin font-normal($size: base) {
  @include font($size, normal);
}

@mixin font-medium($size: base) {
  @include font($size, medium);
}

@mixin font-semibold($size: base) {
  @include font($size, semibold);
}

@mixin font-bold($size: base) {
  @include font($size, bold);
}
